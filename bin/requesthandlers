var exec = require("child_process").exec;
var fs = require('fs');

var page = "";
		fs.readFile('index.html', {encoding: 'utf-8'}, function(err, data) {
			if(err) {
				console.error(err);
			} else {
				page = data;
				console.log(page);
			}
		});

console.log(page);


function start(res, pathname) {
	console.log("Request handler 'start' was called.\n");
		
		var body ='<html>'+
		'<head>'+
		'<meta http-equiv="Content-Type" content="text/html; '+
		'charset=UTF-8" />'+
		'</head>'+
		'<body>'+
		'<form action="/upload" method="post">'+
		'<textarea name="text" rows="20" cols="60"></textarea>'+
		'<input type="submit" value="Submit text" />'+
		'</form>'+
		'</body>'+
		'</html>';

		res.writeHead(200, {'Content-Type': 'text/html'});
		res.write(page);
		res.end();
}

function upload(res, pathname) {
	console.log("Request handler 'upload' was called.\n");
	
	res.writeHead(200, {'Content-Type': 'text/plain'});
	res.write('hello, I am Uploading nodejitsu!\n');
	res.write('request for ' + pathname);
	res.end();
}


exports.start = start;
exports.upload = upload;